query FitspaceGetCurrentMealPlanId {
  getMyMealPlansOverview {
    activePlan {
      id
    }
  }
}

query FitspaceGetMealPlan($mealPlanId: ID) {
  clientGetMealPlan(mealPlanId: $mealPlanId) {
    plan {
      id
      title
      description
      isPublic
      isTemplate
      isDraft
      active
      startDate
      endDate
      dailyCalories
      dailyProtein
      dailyCarbs
      dailyFat

      weeks {
        id
        weekNumber
        name
        description
        completedAt

        days {
          id
          dayOfWeek
          completedAt
          scheduledAt
          targetCalories
          targetProtein
          targetCarbs
          targetFat

          meals {
            id
            name
            dateTime
            instructions
            completedAt

            foods {
              id
              name
              quantity
              unit
              caloriesPer100g
              proteinPer100g
              carbsPer100g
              fatPer100g
              fiberPer100g
              totalCalories
              totalProtein
              totalCarbs
              totalFat
              totalFiber
              openFoodFactsId
            }

            logs {
              id
              loggedAt
              completedAt
              totalCalories
              totalProtein
              totalCarbs
              totalFat

              items {
                id
                name
                quantity
                unit
                calories
                protein
                carbs
                fat
                fiber
                notes
                createdAt
              }
            }
          }
        }
      }
    }
  }
}

# Meal logging mutations
mutation LogMealFood($input: LogMealFoodInput!) {
  logMealFood(input: $input) {
    id
    name
    quantity
    unit
    calories
    protein
    carbs
    fat
    fiber
    notes
    createdAt
  }
}

mutation BatchLogMealFood($input: BatchLogMealFoodInput!) {
  batchLogMealFood(input: $input)
}

mutation UpdateMealFoodLog($input: UpdateMealFoodLogInput!) {
  updateMealFoodLog(input: $input)
}

mutation CompleteMeal($mealId: ID!) {
  completeMeal(mealId: $mealId)
}

mutation UncompleteMeal($mealId: ID!) {
  uncompleteMeal(mealId: $mealId)
}
