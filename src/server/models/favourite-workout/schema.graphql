type FavouriteWorkout {
  id: ID!
  title: String!
  description: String
  createdById: ID!
  createdAt: String!
  updatedAt: String!
  folderId: ID
  folder: FavouriteWorkoutFolder
  exercises: [FavouriteWorkoutExercise!]!
}

type FavouriteWorkoutFolder {
  id: ID!
  name: String!
  createdById: ID!
  createdAt: String!
  updatedAt: String!
  favouriteWorkouts: [FavouriteWorkout!]!
}

type FavouriteWorkoutExercise {
  id: ID!
  name: String!
  order: Int!
  baseId: ID
  favouriteWorkoutId: ID!
  restSeconds: Int
  description: String
  additionalInstructions: String
  instructions: [String!]
  tips: [String!]
  difficulty: String
  base: BaseExercise
  sets: [FavouriteWorkoutSet!]!
}

type FavouriteWorkoutSet {
  id: ID!
  order: Int!
  reps: Int
  minReps: Int
  maxReps: Int
  weight: Float
  rpe: Int
  exerciseId: ID!
}

# Input types for creating favourite workouts
input CreateFavouriteWorkoutInput {
  title: String!
  description: String
  folderId: ID
  exercises: [CreateFavouriteWorkoutExerciseInput!]!
}

input CreateFavouriteWorkoutExerciseInput {
  name: String!
  order: Int!
  baseId: ID
  restSeconds: Int
  description: String
  additionalInstructions: String
  instructions: [String!]
  tips: [String!]
  difficulty: String
  sets: [CreateFavouriteWorkoutSetInput!]!
}

input CreateFavouriteWorkoutSetInput {
  order: Int!
  reps: Int
  minReps: Int
  maxReps: Int
  weight: Float
  rpe: Int
}

# Input types for updating favourite workouts
input UpdateFavouriteWorkoutInput {
  id: ID!
  title: String
  description: String
  folderId: ID
  additionalInstructions: String
  instructions: [String!]
  tips: [String!]
  difficulty: String
  exercises: [UpdateFavouriteWorkoutExerciseInput!]
}

input UpdateFavouriteWorkoutExerciseInput {
  id: ID # If provided, update existing exercise; if not, create new
  name: String!
  order: Int!
  baseId: ID
  restSeconds: Int
  description: String
  tips: [String!]
  difficulty: String
  additionalInstructions: String
  instructions: [String!]
  sets: [UpdateFavouriteWorkoutSetInput!]!
}

input UpdateFavouriteWorkoutSetInput {
  id: ID # If provided, update existing set; if not, create new
  order: Int!
  reps: Int
  minReps: Int
  maxReps: Int
  weight: Float
  rpe: Int
}

# Input for starting a workout from favourite
input StartWorkoutFromFavouriteInput {
  favouriteWorkoutId: ID!
  replaceExisting: Boolean = true
  dayId: ID # Optional: if provided, add to this specific day; otherwise add to today
}

input CreateFavouriteWorkoutFolderInput {
  name: String!
}

input UpdateFavouriteWorkoutFolderInput {
  id: ID!
  name: String
}

extend type Query {
  # Get all favourite workouts for the current user
  getFavouriteWorkouts: [FavouriteWorkout!]!

  # Get a specific favourite workout by ID
  getFavouriteWorkout(id: ID!): FavouriteWorkout

  # Get all favourite workout folders for the current user
  getFavouriteWorkoutFolders: [FavouriteWorkoutFolder!]!
}

extend type Mutation {
  # Create a new favourite workout
  createFavouriteWorkout(input: CreateFavouriteWorkoutInput!): FavouriteWorkout!

  # Update an existing favourite workout
  updateFavouriteWorkout(input: UpdateFavouriteWorkoutInput!): FavouriteWorkout!

  # Update set count for a specific exercise (fast, no debounce needed)
  updateFavouriteExerciseSets(exerciseId: ID!, setCount: Int!): Boolean!

  # Reorder exercises (fast, lightweight - only updates order field)
  updateFavouriteExercisesOrder(
    favouriteId: ID!
    exerciseOrders: [ExerciseOrderInput!]!
  ): Boolean!

  # Remove a single exercise from favourite (fast, lightweight)
  removeFavouriteExercise(exerciseId: ID!): Boolean!

  # Delete a favourite workout
  deleteFavouriteWorkout(id: ID!): Boolean!

  # Start a workout from a favourite (copy to quick workout plan)
  startWorkoutFromFavourite(input: StartWorkoutFromFavouriteInput!): ID!

  # Create a new favourite workout folder
  createFavouriteWorkoutFolder(
    input: CreateFavouriteWorkoutFolderInput!
  ): FavouriteWorkoutFolder!

  # Update an existing favourite workout folder
  updateFavouriteWorkoutFolder(
    input: UpdateFavouriteWorkoutFolderInput!
  ): FavouriteWorkoutFolder!

  # Delete a favourite workout folder
  deleteFavouriteWorkoutFolder(id: ID!): Boolean!
}

input ExerciseOrderInput {
  exerciseId: ID!
  order: Int!
}
